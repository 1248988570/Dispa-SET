

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Implementation and interface &mdash; Documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Input Data" href="data.html" />
    <link rel="prev" title="Model Formulations and clustering" href="formulations.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> DispaSET
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulations.html">Model Formulations and clustering</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Implementation and interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#resolution-flow-chart">Resolution Flow Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dispa-set-database">Dispa-SET database</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simulation-environment">Simulation environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ucm-h-gms-and-ucm-gpr">UCM_h.gms and UCM.gpr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-gdx-gms">make_gdx.gms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#makegdx-bat">makeGDX.bat</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writeresults-gms">writeresults.gms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inputs-gdx">Inputs.gdx</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inputdispa-set-parametername-xlsx">InputDispa-SET -  [ParameterName].xlsx</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inputdispa-set-sets-xlsx">InputDispa-SET -  Sets.xlsx</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inputdispa-set-config-xlsx">InputDispa-SET -  Config.xlsx</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure-of-the-excel-template">Structure of the Excel template</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#post-processing">Post-processing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Input Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="cases.html">Case Studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developers’ section</a></li>
<li class="toctree-l1"><a class="reference internal" href="DispaSET.html">DispaSET package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DispaSET</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Implementation and interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/implementation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="implementation-and-interface">
<span id="implementation"></span><h1>Implementation and interface<a class="headerlink" href="#implementation-and-interface" title="Permalink to this headline">¶</a></h1>
<p>The typical step-by-step procedure to parametrize and run a DispaSET simulation is the following:</p>
<ol class="arabic simple">
<li>Fill the Dispa-SET database with properly formatted data (time series, power plant data, etc.)</li>
<li>Configure the simulation parameters (rolling horizon, data slicing) in the configuration file.</li>
<li>Generate the simulation environment which comprises the inputs of the optimisation</li>
<li>Open the GAMS simulation files (project: UCM.gpr and model: UCM_h.gms) and run the model.</li>
<li>Read and display the simulation results.</li>
</ol>
<p>This section provides a detailed description of these steps and the corresponding data entities.</p>
<div class="section" id="resolution-flow-chart">
<h2>Resolution Flow Chart<a class="headerlink" href="#resolution-flow-chart" title="Permalink to this headline">¶</a></h2>
<p>The whole resolution process for a dispa-SET run is defined from the processing and formatting of the raw data to the generation of aggregated result plots and statistics. A flow chart of the consecutive data entities and processing steps is provided hereunder.</p>
<img alt="_images/Flow-chart.png" src="_images/Flow-chart.png" />
<p>Each box in the flow chart corresponds to one data entity. The links between these data entities correspond to script written in Python or in GAMS. The different steps perform various tasks, which can be summarized by:</p>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Data collection:</dt>
<dd><ul class="first last">
<li>Read csv sheets, assemble data</li>
<li>Convert to the right format (timestep, units, etc).</li>
<li>Define proper time index (duplicates not allowed)</li>
<li>Connect to database</li>
<li>Check if data present &amp; write data</li>
<li>Write metadata</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Pre-processing:</dt>
<dd><ul class="first last">
<li>Read the config file</li>
<li>Slice the data to the required time range</li>
<li>Deal with missing data</li>
<li>Check data for consistency (min up/down times, startup times, etc.)</li>
<li>Calculate variable cost for each unit</li>
<li>Cluster units</li>
<li>Define scenario according to user inputs (curtailment, participation to reserve, amount of VRE, amount of storage, …)</li>
<li>Define initial state (basic merit-order dispatch)</li>
<li>Write the simulation environment to a user-defined folder</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Simulation environment and interoperability:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Self-consistent folder with all required files to run the simulation:</dt>
<dd><ul class="first last">
<li>Excel files</li>
<li>GDX file</li>
<li>Input files in pickle format</li>
<li>Gams model files</li>
</ul>
</dd>
</dl>
</li>
<li>Python scripts to translate the data between one format to the other.</li>
<li>Possibility to modify the inputs manually and re-generate a GDX file from the excel files</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Simulation:</dt>
<dd><ul class="first last">
<li>The GAMS simulation file is run from the simulation environment folder</li>
<li>Alternatively the model is run with the PYOMO solver</li>
<li>All results and inputs are saved within the simulation environment</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Post-processing:</dt>
<dd><ul class="first last">
<li>Reads the simulation results saved in the simulation environment</li>
<li>Aggregates the power generation and storage curves</li>
<li>Computates of yearly statistics</li>
<li>Generates plots</li>
</ul>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="dispa-set-database">
<h2>Dispa-SET database<a class="headerlink" href="#dispa-set-database" title="Permalink to this headline">¶</a></h2>
<p>Although two versions of the database are available (mysql and csv), the public version of Dispa-SET only comes with the latter. The Dispa-SET input data is stored as csv file in directory structure. A link to the required data is then provided by the user in the configuration file.</p>
<img alt="_images/database.png" src="_images/database.png" />
<p>The above figure shows a partially unfolded view of the database structure. In that example, data is provided for the day-ahead net transfer capacities for all lines in the EU, for the year 2015 and with a 1h time resolution. Time series are also provided for the day-ahead load forecast for Belgium in 2015 with 1h time resolution.</p>
</div>
<div class="section" id="configuration-file">
<h2>Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>The excel config file is read at the beginning of the pre-processing phase. It provides general inputs for the simulation as well as links to the relevant data files in the database.</p>
<img alt="_images/config.gif" src="_images/config.gif" />
</div>
<div class="section" id="simulation-environment">
<h2>Simulation environment<a class="headerlink" href="#simulation-environment" title="Permalink to this headline">¶</a></h2>
<p>This section describes the different simulation files, templates and scripts required to run the DispaSET model. For each simulation, these files are included into a single directory corresponding to a self-sufficient simulation environment.</p>
<p>A more comprehensive description of the files included in the simulation environment directory is provided hereunder.</p>
<div class="section" id="ucm-h-gms-and-ucm-gpr">
<h3>UCM_h.gms and UCM.gpr<a class="headerlink" href="#ucm-h-gms-and-ucm-gpr" title="Permalink to this headline">¶</a></h3>
<p>UCM_h.gms is the main GAMS model described in Chapter 1. A copy of this file is included in each simulation environment, allowing keeping track of the exact version of the model used for the simulation. The model must be run in GAMS and requires a proper input file (Inputs.gdx).</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="37%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Requires:</td>
<td>Inputs.gdx</td>
<td>Input file for the simulation.</td>
</tr>
<tr class="row-even"><td>Generates:</td>
<td>Results.gdx</td>
<td>Simulation results in gdx format</td>
</tr>
<tr class="row-odd"><td>.</td>
<td>Results.xlsx</td>
<td>Simulation results in xlsx format.</td>
</tr>
</tbody>
</table>
<p>UCM.gpr is the GAMS project file which should be opened before UCM_h.gms.</p>
</div>
<div class="section" id="make-gdx-gms">
<h3>make_gdx.gms<a class="headerlink" href="#make-gdx-gms" title="Permalink to this headline">¶</a></h3>
<p>GAMS file that reads the different template excel files and generates the Inputs.gdx file. This file should be opened in GAMS.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="37%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Requires:</td>
<td>InputDispa-SET – xxx.xlsx</td>
<td>DispaSET template files</td>
</tr>
<tr class="row-even"><td>Generates:</td>
<td>Inputs.gdx</td>
<td>Input file for the simulation</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="makegdx-bat">
<h3>makeGDX.bat<a class="headerlink" href="#makegdx-bat" title="Permalink to this headline">¶</a></h3>
<p>Batch script that generates the input file from the template without requiring opening GAMS. The first time it is executed, the path of the GAMS folder must be provided.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="37%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Requires:</td>
<td>InputDispa-SET – xxx.xlsx</td>
<td>DispaSET template files</td>
</tr>
<tr class="row-even"><td>.</td>
<td>make_gdx.gms</td>
<td>GAMS file to generate Inputs.gdx</td>
</tr>
<tr class="row-odd"><td>Generates:</td>
<td>Inputs.gdx</td>
<td>Input file for the simulation</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="writeresults-gms">
<h3>writeresults.gms<a class="headerlink" href="#writeresults-gms" title="Permalink to this headline">¶</a></h3>
<p>GAMS file to generate the excel Results.xlsx file from the Results.gdx generated by GAMS (in case the write_excel function was deactivated in GAMS.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="37%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Requires:</td>
<td>Results.gdx</td>
<td>Simulation results in gdx format</td>
</tr>
<tr class="row-even"><td>Generates:</td>
<td>Results.xlsx</td>
<td>Simulation results in xlsx format</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="inputs-gdx">
<h3>Inputs.gdx<a class="headerlink" href="#inputs-gdx" title="Permalink to this headline">¶</a></h3>
<p>All the inputs of the model must be stored in the Inputs.gdx file since it is the only file read by the main GAMS model. This file is generated from the DispaSET template.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="37%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Requires:</td>
<td>InputDispa-SET – xxx.xlsx</td>
<td>DispaSET template files</td>
</tr>
<tr class="row-even"><td>Generates:</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="inputdispa-set-parametername-xlsx">
<h3>InputDispa-SET -  [ParameterName].xlsx<a class="headerlink" href="#inputdispa-set-parametername-xlsx" title="Permalink to this headline">¶</a></h3>
<p>Series of 42 excel files, each corresponding to a parameter of the DispaSET model (see Chapter 1). The files must be formatted according to section 2.2.</p>
</div>
<div class="section" id="inputdispa-set-sets-xlsx">
<h3>InputDispa-SET -  Sets.xlsx<a class="headerlink" href="#inputdispa-set-sets-xlsx" title="Permalink to this headline">¶</a></h3>
<p>Single excel file that contains all the sets used in the model in a column format.</p>
</div>
<div class="section" id="inputdispa-set-config-xlsx">
<h3>InputDispa-SET -  Config.xlsx<a class="headerlink" href="#inputdispa-set-config-xlsx" title="Permalink to this headline">¶</a></h3>
<p>Single excel file that contains simulation metadata in the form of a Table. This metadata allows setting the rolling horizon parameter and slicing the input data to simulate a subset only.</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Config</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="31%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FirstDay</td>
<td>2012</td>
<td>10</td>
<td>1</td>
<td>First day of the simulation in the template data</td>
</tr>
<tr class="row-odd"><td>LastDay</td>
<td>2013</td>
<td>9</td>
<td>30</td>
<td>Last day of the simulation in the template data</td>
</tr>
<tr class="row-even"><td>RollingHorizon Length</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>Length of the rolling horizons</td>
</tr>
<tr class="row-odd"><td>RollingHorizon LookAhead</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>Overlap period of the rolling horizon</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="structure-of-the-excel-template">
<h3>Structure of the Excel template<a class="headerlink" href="#structure-of-the-excel-template" title="Permalink to this headline">¶</a></h3>
<p>The name of the input files are “Input Dispa-SET – [Parameter name].xlsx”. These files contain the data to be read by the model, after conversion into a GDX file.</p>
<p>The structure of all input files follows the following rules:</p>
<ol class="arabic simple">
<li>There is one file per model parameter</li>
<li>Each file contains only one sheet</li>
<li>The first row is left blank for non-time series data (i.e. data starts at A2)</li>
<li><dl class="first docutils">
<dt>For time series data, the rows are organized as follows:</dt>
<dd><ol class="first last loweralpha">
<li>The first row is left blank</li>
<li>Rows 2 to 5 contains the year, month, day and hour of each data</li>
<li>Row 6 contains the time index of the data, which will be used in DispaSET</li>
<li>The data therefore starts at A6</li>
</ol>
</dd>
</dl>
</li>
<li>If one of the input sets of the data is u (the unit name), it is always defined as the first column of the data (column A)</li>
<li>If one of the input sets of the data is h (the time index), it is always defined as the only horizontal input in row 6</li>
</ol>
<p>In the case of the file “Input Dispa-SET – Sets.xlsx”, all the required sets are written in columns with the set name in row 2.</p>
</div>
</div>
<div class="section" id="post-processing">
<h2>Post-processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h2>
<p>Post-processing is implemented in the form of a series of functions to read the simulation inputs and results, to plot them, and to derive statistics.</p>
<p>The following values are computed:</p>
<ul class="simple">
<li>The total energy generated by each fuel, in each country.</li>
<li>The total energy curtailed</li>
<li>the total load shedding</li>
<li>The overall country balance of the interconnection flows</li>
<li>The total hours of congestion in each interconnection line</li>
<li>The total amount of lost load, indicating (if not null) that the unit commitment problem was unfeasible at some hours</li>
<li>The number of start-ups of power plants for each fuel</li>
</ul>
<p>The following plots can be genrated:</p>
<ul class="simple">
<li>A dispatch plot (by fuel type) for each country</li>
<li>A commitment status (ON/OFF) plot for all the unit in a given country</li>
<li>The level (or state of charge) of all the storage units in a given country</li>
<li>The overall power generation by fuel type for all countries (bar plot)</li>
</ul>
<p>An example usage of these funciones is provided in the “Read_Results.ipynb” notebook.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="data.html" class="btn btn-neutral float-right" title="Input Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="formulations.html" class="btn btn-neutral" title="Model Formulations and clustering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Sylvain Quoilin &amp; Kostas Kavvadias

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>